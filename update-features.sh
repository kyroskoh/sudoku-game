#!/bin/bash
# Quick update script for new features

echo "ğŸš€ Updating Sudoku Mastery with new features..."
echo ""
echo "âœ¨ New Features & Fixes:"
echo "  - ğŸ† Global Leaderboard System"
echo "  - ğŸ‘¤ Name Entry for Leaderboard"
echo "  - ğŸ® Casual Mode Now Tracked on Leaderboard!"
echo "  - ğŸ“Š Top 10 Rankings per Mode & Difficulty"
echo "  - ğŸ¯ Fixed Difficulty Selection (Casual & Challenge)"
echo "  - â¬…ï¸ Change Difficulty Button During Gameplay"
echo "  - â±ï¸ Complete Time Recording for ALL Modes"
echo "  - ğŸŒ Daily Puzzle with SGT Timezone (12AM reset)"
echo "  - ğŸ² Date-based Seeding for Consistent Daily Puzzles"
echo "  - ğŸ¯ All 5 Difficulties Available for Daily Puzzles"
echo "  - ğŸ” Puzzle Security - Salt Protection (prevents cheating)"
echo "  - ğŸ·ï¸ Seed Display in UI (transparency + debugging)"
echo "  - âœ… Better Loading States & Feedback"
echo ""

# Push to repository
echo "ğŸ“¤ Pushing to repository..."
git add .
git commit -m "Add leaderboard, name entry, all-difficulty dailies, puzzle security (salt), and seed display" || echo "Nothing to commit"
git push origin main

echo ""
echo "âœ… Done! Now deploy on your server:"
echo ""
echo "ğŸ”’ IMPORTANT: Set PUZZLE_SALT first!"
echo ""
echo "  ssh sudoku@breezehost-jp"
echo "  cd ~/sudoku-game"
echo "  git pull"
echo ""
echo "  # Set PUZZLE_SALT (REQUIRED for security!)"
echo "  cd backend"
echo "  nano .env"
echo "  # Add: PUZZLE_SALT=\"\$(openssl rand -hex 32)\""
echo "  cd .."
echo ""
echo "  # Deploy"
echo "  sudo docker compose down"
echo "  sudo docker compose build --no-cache"
echo "  sudo docker compose up -d"
echo "  sudo docker exec -it sudoku-backend npx prisma migrate deploy"
echo "  sudo docker compose restart"
echo ""
echo "ğŸŒ Then visit:"
echo "  - https://sudoku.kyros.party/casual (see puzzle seed displayed)"
echo "  - https://sudoku.kyros.party/daily (choose difficulty, see seed)"
echo "  - https://sudoku.kyros.party/leaderboard (see names on leaderboard)"
echo ""
echo "ğŸ“ Notes:"
echo "  - Database migration required for displayName feature"
echo "  - PUZZLE_SALT prevents cheating (required!)"
echo "  - Seeds now displayed in UI for transparency"

